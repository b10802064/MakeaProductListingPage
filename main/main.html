<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>products</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
        <style>
            *{
                margin: 0;
                padding: 0;
            }
            .box{
                padding: 20px;
                display: flex;
                width: 100%;
                flex-wrap: wrap;
                justify-content: center;
            }
        </style>
</head>

<body>

    <div class="box">
        <select name="products" id="products">
            <option  value="">請選擇類別</option>
            <option  value="3C">3C</option>
            <option  value="food" selected>飲料</option>
            <option  value="drink">食品</option>
        </select>
        <button id="btn">Click</button>
    </div>
    <div id="container">

    </div>

    <script type="module">
        import { product } from "./product.js"

        let container, inputclass, inputprice;
        let table, thead, tbody;
        var btn = document.getElementById('btn');


        let parray = {
            Titles: ["產品編號", "產品名稱", "數量", "價格", "類別"],
            product
        }

        document.getElementById('btn').onclick = function () {
            buttonClicked();
        };



        function buttonClicked() {
            document.getElementById("container").innerHTML = "";
            let GlobalCountry2dArray = [];

            container = document.getElementById('container');
            table = document.createElement('table');

            table.setAttribute("class", "table table-bordered table-striped w-75 mx-auto");
            table.setAttribute("id", "hh")

            thead = document.createElement('thead');
            tbody = document.createElement('tbody');


            CreateThead(parray.Titles);

            let vv =parray.product.filter(word => word.ProductType == document.getElementById("products").options[document.getElementById("products").selectedIndex].text);
            
            vv.forEach(item => {
                let values = Object.values(item);
                GlobalCountry2dArray.push(values);
            });
            CreateTbody(GlobalCountry2dArray);


        }

        function CreateThead(titleArray) {
            //(1)
            let theadTR = document.createElement("tr");
            //(2)建立th,設定資料,th加入tr
            titleArray.forEach((title, index) => {
                let th = document.createElement("th");
                th.innerText = title;
                theadTR.append(th);
            });
            thead.append(theadTR);
            table.append(thead);
            container.append(table);
        }

        function CreateTbody(globalCountry) {
            globalCountry.forEach(country => {
                let tr = document.createElement("tr");
                //(2)建立td,設定資料,td加入tr
                country.forEach(columndata => {
                    let td = document.createElement("td");
                    td.innerText = columndata;
                    tr.append(td);
                });
                tbody.append(tr);
            });
            table.append(tbody);
        }



    </script>
</body>